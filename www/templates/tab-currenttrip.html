<ion-view>
    <ion-nav-title>
        <div ng-if="isongoing">
            {{trip.LegList.Leg[0].Origin.name +" -> "+ trip.LegList.Leg[trip.LegList.Leg.length-1].Destination.name}}
        </div>
        <div ng-if="!isongoing">
            Ongoing trip
        </div>
    </ion-nav-title>
    <ion-content class="has-footer">
        <div ng-if="!isongoing">There is no trip!</div>
        <ion-list ng-if="isongoing" class="list-borderless">
            <ion-item ng-repeat="tripUnit in tripList" class="row-no-padding item-borderless">
                <div class="row row-no-padding" ng-if="tripUnit.type=='Origin'">
                    <div class="col col-10 col-center text-center">
                        <div ng-if="$index != 0">
                            <div class="timeline-dotted-balanced" ng-if="tripUnit.status == 'finished'"></div>
                            <div class="timeline-dotted-energized" ng-if="tripUnit.status == 'ongoing'"></div>
                            <div class="timeline-dotted-assertive" ng-if="tripUnit.status == 'todo'"></div>
                            <i class="ion-record balanced" ng-if="tripUnit.status == 'finished'"
                               style="font-size:16px;padding-left:9px;"></i>
                            <i class="ion-record energized" ng-if="tripUnit.status == 'ongoing'"
                               style="font-size:16px;padding-left:9px;"></i>
                            <i class="ion-record assertive" ng-if="tripUnit.status == 'todo'"
                                style="font-size:16px;padding-left:9px;"></i>
                        </div>
                        <i class="icon ion-location balanced" ng-if="$index == 0" style="font-size: 24px;padding-left:9px;"></i>
                    </div>
                    <div class="col col-20 col-center text-center">
                        <strong>{{tripUnit.time}}</strong>
                    </div>
                    <div class="col">
                        <div class="row padding"><strong>{{tripUnit.name}}</strong></div>
                        <div class="row padding">
                            <i ng-if="tripUnit.traffictype == 'METRO'" class="icon ion-android-subway">
                                {{tripUnit.line}}
                            </i>
                            <i ng-if="tripUnit.traffictype == 'BUS'" class="icon ion-android-bus">
                                {{tripUnit.line}}
                            </i>
                            <i ng-if="tripUnit.traffictype == 'TRAIN'" class="icon ion-android-train">
                                {{tripUnit.line}}
                            </i>

                            <div>&nbsp;-&nbsp;towards: {{tripUnit.dir}}</div>
                        </div>
                    </div>
                </div>
                <div class="row row-no-padding" ng-if="tripUnit.type=='Destination'">
                    <div class="col col-10 col-center text-center">
                        <div ng-if="$index != tripList.length-1">
                            <div class="timeline-dotted-balanced" ng-if="tripUnit.status == 'finished'"></div>
                            <div class="timeline-dotted-energized" ng-if="tripUnit.status == 'ongoing'"></div>
                            <div class="timeline-dotted-assertive" ng-if="tripUnit.status == 'todo'"></div>
                            <i class="ion-record balanced" ng-if="tripUnit.status == 'finished'"
                               style="font-size:16px;padding-left:9px;"></i>
                            <i class="ion-record energized" ng-if="tripUnit.status == 'ongoing'"
                               style="font-size:16px;padding-left:9px;"></i>
                            <i class="ion-record assertive" ng-if="tripUnit.status== 'todo'"
                               style="font-size:16px;padding-left:9px;"></i>
                        </div>
                        <i class="icon ion-location assertive" ng-if="$index == tripList.length-1" style="font-size: 24px;padding-left:9px;"></i>
                    </div>
                    <div class="col col-20 col-center text-center">
                        <strong>{{tripUnit.time}}</strong>
                    </div>

                    <div class="col">
                        <div class="row padding"><strong>{{tripUnit.name}}</strong></div>
                    </div>
                </div>
                <div class="row row-no-padding" ng-if="tripUnit.type=='Stop'" style="font-size: 12px;">
                    <div class="col col-10 col-center text-center">
                        <div class="timeline-dotted-balanced" ng-if="tripUnit.status == 'finished'"></div>
                        <div class="timeline-dotted-energized" ng-if="tripUnit.status == 'ongoing'"></div>
                        <div class="timeline-dotted-assertive" ng-if="tripUnit.status == 'todo'"></div>
                        <i class="ion-record balanced" ng-if="tripUnit.status == 'finished'"
                           style="font-size:8px;padding-left:9px;"></i>
                        <i class="ion-record energized" ng-if="tripUnit.status == 'ongoing'"
                           style="font-size:8px;padding-left:9px;"></i>
                        <i class="ion-record assertive" ng-if="tripUnit.status == 'todo'"
                           style="font-size:8px;padding-left:9px;"></i>
                    </div>
                    <div class="col col-20 col-center text-center">
                        {{tripUnit.time}}
                    </div>

                    <div class="col">
                        <div class="row padding">{{tripUnit.name}}</div>
                    </div>
                </div>
                <div class="row row-no-padding" ng-if="tripUnit.type =='Walk'">
                    <div class="col col-10 col-center text-center">

                            <div class="timeline-dotted-balanced" ng-if="tripUnit.status == 'finished'"></div>
                            <div class="timeline-dotted-energized" ng-if="tripUnit.status == 'ongoing'"></div>
                            <div class="timeline-dotted-assertive" ng-if="tripUnit.status == 'todo'"></div>
                        <i class="ion-record balanced" ng-if="tripUnit.status == 'finished'"
                           style="font-size:8px;padding-left:9px;"></i>
                        <i class="ion-record energized" ng-if="tripUnit.status == 'ongoing'"
                           style="font-size:8px;padding-left:9px;"></i>
                        <i class="ion-record assertive" ng-if="tripUnit.status == 'todo'"
                           style="font-size:8px;padding-left:9px;"></i>
                    </div>
                    <div class="col col-20 col-center text-center">

                    </div>
                    <div class="col">
                        <div class="row padding">
                                <i class="icon ion-android-walk">&nbspWalk</i>
                                <div>&nbsp;-&nbsp;{{tripUnit.dist}} meters</div>
                        </div>
                    </div>
                </div>
            </ion-item>
        </ion-list>
    </ion-content>
    <ion-footer-bar style="padding: 0;margin-bottom:42px;" ng-if="isongoing">
        <div class="button-bar">
            <button class="button button-balanced" ng-click="finish()" >Finish!</button>
        </div>
    </ion-footer-bar>
</ion-view>